#!/usr/bin/env python
"""
 load_mock
 load a mock catalog into an hod_mock.MockHOD class
 
 author: Nick Hand
 contact: nhand@berkeley.edu
 creation date: 06/17/2014
"""
import argparse
from flipper import flipperDict
import hod_mock

def main(params):
    """
    Load and save the MockHOD instance
    """
    # initialize the empty mock catalog
    mock = hod_mock.MockHOD(params['redshift'], params['box_size'], params['units'], cosmo=params['cosmology'])
    
    # load the objects from file
    p = params['input']
    mock.load(p['file'], p['fields'], params['halo_id'], params['type_params'], skip_lines=p['skip_lines'])
                
    # now save the file
    mock.save(params['outfile'])

#end main
    
#-------------------------------------------------------------------------------
if __name__ == '__main__':
    
    # parse the input arguments
    desc = "load a mock catalog from file into an hod_mock.MockHOD class"
    parser = argparse.ArgumentParser(description=desc)
    parser.add_argument('param_file', type=str, help="the parameter file") 
    args = parser.parse_args()

    params = flipperDict.flipperDict()
    params.readFromFile(args.param_file)

    main(params)